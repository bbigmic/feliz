(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{7862:function(e,t,a){Promise.resolve().then(a.bind(a,8286))},8286:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),r=a(2265),l=a(3287),n=a(9763);let i=(0,n.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),d=(0,n.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=(0,n.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),o=(0,n.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),x=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=(0,n.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),u=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=a(9064),h=a(257);function b(e){let{isOpen:t,onClose:a,onAdded:l,softwareToEdit:n}=e,[i,d]=(0,r.useState)((null==n?void 0:n.name)||""),[c,o]=(0,r.useState)((null==n?void 0:n.description)||""),[x,m]=(0,r.useState)((null==n?void 0:n.price)||0),[u,h]=(0,r.useState)((null==n?void 0:n.categories)?JSON.parse(n.categories).join(", "):""),[b,y]=(0,r.useState)((null==n?void 0:n.demoUrl)||""),[g,j]=(0,r.useState)((null==n?void 0:n.features)?JSON.parse(n.features):[]),[f,N]=(0,r.useState)(""),[k,w]=(0,r.useState)((null==n?void 0:n.rating)||5),[v,S]=(0,r.useState)((null==n?void 0:n.sales)||0),[C,z]=(0,r.useState)((null==n?void 0:n.status)||"active"),[T,A]=(0,r.useState)((null==n?void 0:n.images)?n.images.map(e=>e.url):[]),[E,P]=(0,r.useState)((null==n?void 0:n.images)?n.images.findIndex(e=>e.isThumbnail):0),[Z,L]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{n&&(d(n.name||""),o(n.description||""),m(n.price||0),h(n.categories?JSON.parse(n.categories).join(", "):""),y(n.demoUrl||""),j(n.features?JSON.parse(n.features):[]),w(n.rating||5),S(n.sales||0),z(n.status||"active"),A(n.images?n.images.map(e=>e.url):[]),P(n.images?n.images.findIndex(e=>e.isThumbnail):0))},[n]),!t)return null;let O=async e=>{let t=e.target.files;if(!t)return;L(!0);let a=[];for(let e=0;e<t.length;e++){let s=new FormData;s.append("file",t[e]);let r=await fetch("/api/admin/upload-image",{method:"POST",body:s}),l=await r.json();l.url?a.push(l.url):p.ZP.error("Błąd uploadu zdjęcia!")}A(e=>[...e,...a]),L(!1),P(0)},D=async e=>{e.preventDefault();let t=[];if(i||t.push("nazwa"),c||t.push("opis"),u||t.push("kategorie"),b||t.push("demoUrl"),t.length>0){console.error("Brakujące pola:",t),p.ZP.error("Uzupełnij: ".concat(t.join(", ")));return}let s={name:i,description:c,price:x,categories:JSON.stringify(u.split(",").map(e=>e.trim()).filter(Boolean)),demoUrl:b,features:JSON.stringify(g),rating:k,sales:v,status:C,images:T,thumbnailIdx:E};(n?await fetch("/api/admin/softwares?id=".concat(n.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/admin/softwares",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(p.ZP.success(n?"Oprogramowanie zaktualizowane!":"Oprogramowanie dodane!"),l(),a(),n||(d(""),o(""),m(0),h(""),y(""),j([]),N(""),w(5),S(0),z("active"),A([]),P(0))):p.ZP.error("Błąd przy zapisie oprogramowania!")};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:(0,s.jsxs)("div",{className:"bg-darkpanel rounded-xl shadow-lg p-8 w-full max-w-lg relative",children:[(0,s.jsx)("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-white",onClick:a,disabled:Z,children:"✕"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-darktext",children:"Dodaj oprogramowanie"}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Nazwa",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:i,onChange:e=>d(e.target.value),required:!0,disabled:Z}),(0,s.jsx)("textarea",{placeholder:"Opis",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:c,onChange:e=>o(e.target.value),required:!0,disabled:Z}),(0,s.jsx)("input",{type:"number",placeholder:"Cena",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:x,onChange:e=>m(Number(e.target.value)),required:!0,disabled:Z}),(0,s.jsx)("input",{type:"text",placeholder:"Kategorie (oddziel przecinkiem)",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:u,onChange:e=>h(e.target.value),required:!0,disabled:Z}),(0,s.jsx)("input",{type:"url",placeholder:"Demo URL",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:b,onChange:e=>y(e.target.value),required:!0,disabled:Z}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Dodaj cechę",className:"flex-1 p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:f,onChange:e=>N(e.target.value),disabled:Z}),(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{f.trim()&&(j([...g,f.trim()]),N(""))},disabled:Z,children:"Dodaj"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map((e,t)=>(0,s.jsx)("span",{className:"bg-primary-600 text-white px-2 py-1 rounded-full text-xs",children:e},t))}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 text-darksubtle",children:"Zdjęcia (Cloudinary):"}),(0,s.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:O,disabled:Z}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:T.map((e,t)=>(0,s.jsxs)("div",{className:"relative border-2 rounded-lg ".concat(E===t?"border-primary-500":"border-gray-700"),children:[(0,s.jsx)("img",{src:e,alt:"miniatura",className:"w-20 h-20 object-cover rounded-lg"}),(0,s.jsx)("button",{type:"button",className:"absolute top-1 right-1 bg-black bg-opacity-60 text-white rounded-full px-1 text-xs",onClick:()=>{A(T.filter((e,a)=>a!==t)),E===t?P(0):E>t&&P(E-1)},children:"\xd7"}),(0,s.jsx)("button",{type:"button",className:"absolute bottom-1 left-1 rounded-full px-2 text-xs ".concat(E===t?"bg-primary-600 text-white":"bg-gray-700 text-gray-200"),onClick:()=>P(t),children:E===t?"Miniaturka":"Ustaw jako miniaturkę"})]},e))})]}),(0,s.jsx)("button",{type:"submit",className:"btn-primary w-full",disabled:Z,children:Z?"Ładowanie...":"Dodaj oprogramowanie"})]})]})})}function y(e){let{isOpen:t,onClose:a,onAuthSuccess:l}=e,[n,i]=(0,r.useState)("login"),[d,c]=(0,r.useState)(""),[o,x]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1);if((0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),!t)return null;let j=async e=>{if(e.preventDefault(),"register"===n&&!h){p.ZP.error("Musisz zaakceptować regulamin!");return}u(!0);try{let e="register"===n?{email:d,password:o,termsAccepted:h,marketingAccepted:y}:{email:d,password:o},t=await fetch("/api/auth/".concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();t.ok?(p.ZP.success("login"===n?"Zalogowano pomyślnie!":"Rejestracja udana!"),a(),l&&l(),c(""),x("")):p.ZP.error(s.error||"Błąd!")}catch(e){p.ZP.error("Błąd sieci!")}finally{u(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:(0,s.jsxs)("div",{className:"bg-darkpanel rounded-xl shadow-lg p-8 w-full max-w-sm relative",children:[(0,s.jsx)("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-white",onClick:a,disabled:m,children:"✕"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-darktext",children:"login"===n?"Logowanie":"Rejestracja"}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsx)("input",{type:"email",placeholder:"Email",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:d,onChange:e=>c(e.target.value),required:!0,disabled:m}),(0,s.jsx)("input",{type:"password",placeholder:"Hasło",className:"w-full p-2 rounded bg-darkbg border border-gray-700 text-darktext",value:o,onChange:e=>x(e.target.value),required:!0,disabled:m}),"register"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-darksubtle",children:[(0,s.jsx)("input",{type:"checkbox",checked:h,onChange:e=>b(e.target.checked),required:!0,disabled:m}),"Akceptuję ",(0,s.jsx)("a",{href:"/regulamin",target:"_blank",className:"underline text-primary-400",children:"regulamin"})," (wymagane)"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-darksubtle",children:[(0,s.jsx)("input",{type:"checkbox",checked:y,onChange:e=>g(e.target.checked),disabled:m}),"Chcę otrzymywać informacje marketingowe (opcjonalnie)"]})]}),(0,s.jsx)("button",{type:"submit",className:"btn-primary w-full",disabled:m,children:m?"...":"login"===n?"Zaloguj się":"Zarejestruj się"})]}),(0,s.jsx)("div",{className:"text-center mt-4",children:"login"===n?(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:["Nie masz konta?"," ",(0,s.jsx)("button",{className:"text-primary-400 hover:underline",onClick:()=>i("register"),disabled:m,children:"Zarejestruj się"})]}):(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:["Masz już konto?"," ",(0,s.jsx)("button",{className:"text-primary-400 hover:underline",onClick:()=>i("login"),disabled:m,children:"Zaloguj się"})]})})]})})}function g(){let[e,t]=(0,r.useState)("software"),[a,n]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[j,f]=(0,r.useState)(null),[N,k]=(0,r.useState)(!1),[w,v]=(0,r.useState)("software"),[S,C]=(0,r.useState)([]),[z,T]=(0,r.useState)(!1),[A,E]=(0,r.useState)(null),[P,Z]=(0,r.useState)([]),[L,O]=(0,r.useState)(!1),[D,U]=(0,r.useState)(!1),[M,q]=(0,r.useState)([]),[_,B]=(0,r.useState)(!1),[F,J]=(0,r.useState)(!1),[I,K]=(0,r.useState)(null),[V,H]=(0,r.useState)(!1),[R,W]=(0,r.useState)(null),[Y,G]=(0,r.useState)("all"),[Q,X]=(0,r.useState)(!1),[$,ee]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(null),es=async()=>{g(!0);let e=await fetch("/api/admin/softwares");n((await e.json()).softwares||[]),g(!1)},er=async()=>{B(!0);let e=await fetch("/api/admin/components");q((await e.json()).components||[]),B(!1)},el=async()=>{T(!0);try{let e=await fetch("/api/admin/orders"),t=await e.json();C(t.orders||[])}catch(e){console.error("Błąd pobierania zam\xf3wień:",e),p.ZP.error("Błąd pobierania zam\xf3wień")}finally{T(!1)}};if((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();console.log("API /api/auth/me response:",t),t.user&&t.user.isAdmin?(console.log("user is admin:",t.user),ea(t.user),ee(!1)):(console.log("user is not admin or not logged in:",t.user),ea(null),ee(!0))}catch(e){console.log("error in checkAuth:",e),ea(null),ee(!0)}finally{X(!0)}})()},[]),(0,r.useEffect)(()=>{"software"===e&&es(),"orders"===e&&el(),"users"===e&&(O(!0),fetch("/api/admin/users").then(e=>e.json()).then(e=>Z(e.users||[])).finally(()=>O(!1))),"components"===e&&er()},[e]),!Q)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center text-darksubtle",children:"Sprawdzanie uprawnień..."});if($)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-darkbg text-darktext",children:(0,s.jsxs)("div",{className:"max-w-sm w-full",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Panel Administracyjny"}),(0,s.jsx)("p",{className:"text-darksubtle mt-2",children:"Dostęp tylko dla administratora"})]}),(0,s.jsx)(y,{isOpen:!0,onClose:()=>{},onAuthSuccess:()=>window.location.reload()})]})});let en=a.filter(e=>"all"===Y||e.status===Y),ei=[{title:"Wszystkie oprogramowanie",value:a.length,icon:i,color:"text-primary-500"},{title:"Aktywne",value:a.filter(e=>"active"===e.status).length,icon:d,color:"text-green-600"},{title:"Wyświetlane",value:en.length,icon:c,color:"text-purple-600"},{title:"Średnia ocena",value:a.length>0?(a.reduce((e,t)=>e+t.rating,0)/a.length).toFixed(1):"0.0",icon:o,color:"text-orange-600"}],ed=async(e,t)=>{let s="active"===t?"inactive":"active";try{(await fetch("/api/admin/softwares?id=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok?(n(a.map(t=>t.id===e?{...t,status:s}:t)),p.ZP.success("Status zmieniony na ".concat("active"===s?"aktywny":"nieaktywny"))):p.ZP.error("Błąd podczas zmiany statusu")}catch(e){console.error("Error toggling status:",e),p.ZP.error("Błąd podczas zmiany statusu")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-darkbg text-darktext",children:[(0,s.jsx)("header",{className:"bg-darkpanel shadow-sm border-b border-gray-800",children:(0,s.jsx)("div",{className:"container mx-auto px-2 sm:px-4 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("img",{src:"/logo-wsp-edu.png",alt:"Logo",className:"w-10 h-10 rounded-lg object-contain p-1"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-darktext",children:"Panel Administracyjny"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,s.jsxs)("button",{className:"btn-primary flex items-center justify-center space-x-2 w-full sm:w-auto",onClick:()=>U(!0),children:[(0,s.jsx)(x,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Dodaj oprogramowanie"})]}),(0,s.jsx)("button",{className:"btn-secondary text-sm px-4 py-2 w-full sm:w-auto",onClick:async()=>{await fetch("/api/auth/logout",{method:"POST"}),window.location.reload()},children:"Wyloguj się"})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8",children:[(0,s.jsxs)("div",{className:"flex space-x-2 mb-6 border-b border-gray-800 overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-darkbg scrollbar-track-transparent",children:[(0,s.jsx)("button",{className:"px-6 py-2 font-medium transition-colors duration-200 border-b-2 ".concat("software"===e?"border-primary-500 text-primary-500":"border-transparent text-darksubtle hover:text-primary-400"),onClick:()=>t("software"),children:"Oprogramowania"}),(0,s.jsx)("button",{className:"px-6 py-2 font-medium transition-colors duration-200 border-b-2 ".concat("users"===e?"border-primary-500 text-primary-500":"border-transparent text-darksubtle hover:text-primary-400"),onClick:()=>t("users"),children:"Użytkownicy"}),(0,s.jsx)("button",{className:"px-6 py-2 font-medium transition-colors duration-200 border-b-2 ".concat("orders"===e?"border-primary-500 text-primary-500":"border-transparent text-darksubtle hover:text-primary-400"),onClick:()=>t("orders"),children:"Zam\xf3wienia"}),(0,s.jsx)("button",{className:"px-6 py-2 font-medium transition-colors duration-200 border-b-2 ".concat("components"===e?"border-primary-500 text-primary-500":"border-transparent text-darksubtle hover:text-primary-400"),onClick:()=>t("components"),children:"Komponenty"})]}),"software"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-4 gap-4 md:gap-6 mb-6",children:ei.map((e,t)=>(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"card min-w-[180px]",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-darksubtle",children:e.title}),(0,s.jsx)("p",{className:"text-2xl font-bold text-darktext",children:e.value})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-darkbg flex items-center justify-center ".concat(e.color),children:(0,s.jsx)(e.icon,{className:"w-6 h-6"})})]})},e.title))}),(0,s.jsxs)(l.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-darktext",children:"Zarządzanie oprogramowaniami"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,s.jsxs)("select",{className:"px-3 py-2 border border-gray-700 rounded-lg text-sm bg-darkpanel text-darktext w-full sm:w-auto",children:[(0,s.jsx)("option",{className:"bg-darkpanel text-darktext",children:"Wszystkie kategorie"}),(0,s.jsx)("option",{className:"bg-darkpanel text-darktext",children:"E-commerce"}),(0,s.jsx)("option",{className:"bg-darkpanel text-darktext",children:"Business"}),(0,s.jsx)("option",{className:"bg-darkpanel text-darktext",children:"Content"})]}),(0,s.jsxs)("select",{value:Y,onChange:e=>G(e.target.value),className:"px-3 py-2 border border-gray-700 rounded-lg text-sm bg-darkpanel text-darktext w-full sm:w-auto",children:[(0,s.jsx)("option",{value:"all",className:"bg-darkpanel text-darktext",children:"Wszystkie statusy"}),(0,s.jsx)("option",{value:"active",className:"bg-darkpanel text-darktext",children:"Aktywne"}),(0,s.jsx)("option",{value:"inactive",className:"bg-darkpanel text-darktext",children:"Nieaktywne"})]})]})]}),h?(0,s.jsx)("div",{className:"text-center py-12 text-lg text-darksubtle",children:"Ładowanie danych..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-col gap-4 sm:hidden",children:en.map(e=>(0,s.jsxs)("div",{className:"bg-darkpanel rounded-xl shadow-lg p-4 border border-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[e.thumbnailUrl&&(0,s.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-14 h-14 rounded-lg object-cover border border-gray-800"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-darktext text-lg",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-darksubtle",children:[e.description.substring(0,50),"..."]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:(Array.isArray(e.categories)?e.categories:JSON.parse(e.categories||"[]")).map((e,t)=>(0,s.jsx)("span",{className:"bg-primary-600 text-white px-2 py-1 rounded-full text-xs font-medium mr-1",children:e},e))}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("span",{className:"text-primary-400 font-bold text-base",children:[e.price.toLocaleString("pl-PL")," zł"]}),(0,s.jsxs)("span",{className:"text-darksubtle text-xs",children:["Sprzedaże: ",e.sales]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-yellow-500",children:"★"}),(0,s.jsx)("span",{className:"text-darksubtle",children:e.rating}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("active"===e.status?"bg-green-900 text-green-300 border border-green-800":"bg-red-900 text-red-300 border border-red-800"),children:"active"===e.status?"Aktywne":"Nieaktywne"})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>{W(e),k(!0)},className:"btn-primary flex-1 py-2 text-xs",children:"Edytuj"}),(0,s.jsx)("button",{onClick:()=>window.open("/demo/".concat(e.id),"_blank"),className:"btn-secondary flex-1 py-2 text-xs",children:"Zobacz"}),(0,s.jsx)("button",{onClick:()=>ed(e.id,e.status),className:"flex-1 py-2 text-xs rounded-lg ".concat("active"===e.status?"bg-orange-700 hover:bg-orange-800 text-white":"bg-green-700 hover:bg-green-800 text-white"),children:"active"===e.status?"Dezaktywuj":"Aktywuj"}),(0,s.jsx)("button",{onClick:async()=>{confirm("Czy na pewno chcesz usunąć to oprogramowanie?")&&(await fetch("/api/admin/softwares?id=".concat(e.id),{method:"DELETE"}),es())},className:"bg-red-700 hover:bg-red-800 text-white rounded-lg px-2 py-2 text-xs",children:"Usuń"})]})]},e.id))}),(0,s.jsx)("div",{className:"overflow-x-auto hidden sm:block",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Nazwa"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Kategoria"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Cena"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Sprzedaże"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Ocena"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Akcje"})]})}),(0,s.jsx)("tbody",{children:en.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-900 hover:bg-darkbg/60",children:[(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[e.thumbnailUrl&&(0,s.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-12 h-12 rounded-lg object-cover border border-gray-800"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-darktext",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-darksubtle",children:[e.description.substring(0,50),"..."]})]})]})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:(Array.isArray(e.categories)?e.categories:JSON.parse(e.categories||"[]")).map((e,t)=>(0,s.jsx)("span",{className:"bg-primary-600 text-white px-2 py-1 rounded-full text-xs font-medium mr-1",children:e},e))})}),(0,s.jsxs)("td",{className:"py-4 px-4 font-medium text-darktext",children:[e.price.toLocaleString("pl-PL")," zł"]}),(0,s.jsx)("td",{className:"py-4 px-4 text-darksubtle",children:e.sales}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{className:"text-yellow-500",children:"★"}),(0,s.jsx)("span",{className:"text-darksubtle",children:e.rating})]})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("active"===e.status?"bg-green-900 text-green-300 border border-green-800":"bg-red-900 text-red-300 border border-red-800"),children:"active"===e.status?"Aktywne":"Nieaktywne"})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{W(e),k(!0)},className:"text-primary-500 hover:text-primary-300 p-1",title:"Edytuj",children:(0,s.jsx)(m,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>window.open("/demo/".concat(e.id),"_blank"),className:"text-green-400 hover:text-green-300 p-1",title:"Zobacz demo",children:(0,s.jsx)(d,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>ed(e.id,e.status),className:"p-1 ".concat("active"===e.status?"text-orange-400 hover:text-orange-300":"text-green-400 hover:text-green-300"),title:"active"===e.status?"Dezaktywuj":"Aktywuj",children:"active"===e.status?"⏸️":"▶️"}),(0,s.jsx)("button",{onClick:async()=>{confirm("Czy na pewno chcesz usunąć to oprogramowanie?")&&(await fetch("/api/admin/softwares?id=".concat(e.id),{method:"DELETE"}),es())},className:"text-red-400 hover:text-red-300 p-1",title:"Usuń",children:(0,s.jsx)(u,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]})]}),"users"===e&&(0,s.jsxs)(l.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Użytkownicy"}),L?(0,s.jsx)("div",{className:"text-center py-12 text-lg text-darksubtle",children:"Ładowanie danych..."}):(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-2",children:"ID"}),(0,s.jsx)("th",{className:"py-2",children:"Email"}),(0,s.jsx)("th",{className:"py-2",children:"Data rejestracji"}),(0,s.jsx)("th",{className:"py-2",children:"Zgoda na regulamin"}),(0,s.jsx)("th",{className:"py-2",children:"Zgoda marketingowa"})]})}),(0,s.jsx)("tbody",{children:P.map(e=>(0,s.jsxs)("tr",{className:"border-t border-gray-700",children:[(0,s.jsx)("td",{className:"py-2",children:e.id}),(0,s.jsx)("td",{className:"py-2",children:e.email}),(0,s.jsx)("td",{className:"py-2",children:new Date(e.createdAt).toLocaleString("pl-PL")}),(0,s.jsx)("td",{className:"py-2",children:e.termsAccepted?"✔️":"❌"}),(0,s.jsx)("td",{className:"py-2",children:e.marketingAccepted?"✔️":"❌"})]},e.id))})]})]}),"orders"===e&&(0,s.jsxs)(l.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Zam\xf3wienia demo"}),z?(0,s.jsx)("div",{className:"text-center py-12 text-lg text-darksubtle",children:"Ładowanie danych..."}):(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-2",children:"ID"}),(0,s.jsx)("th",{className:"py-2",children:"Email"}),(0,s.jsx)("th",{className:"py-2",children:"Typ"}),(0,s.jsx)("th",{className:"py-2",children:"Produkt"}),(0,s.jsx)("th",{className:"py-2",children:"Telefon"}),(0,s.jsx)("th",{className:"py-2",children:"Status"}),(0,s.jsx)("th",{className:"py-2",children:"Data"}),(0,s.jsx)("th",{className:"py-2",children:"Zgoda na regulamin"}),(0,s.jsx)("th",{className:"py-2",children:"Zgoda marketingowa"}),(0,s.jsx)("th",{className:"py-2",children:"Akcje"})]})}),(0,s.jsx)("tbody",{children:S.map(e=>{var t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{className:"border-t border-gray-700",children:[(0,s.jsx)("td",{className:"py-2",children:e.id}),(0,s.jsx)("td",{className:"py-2",children:e.email||(null===(t=e.user)||void 0===t?void 0:t.email)||"Brak"}),(0,s.jsx)("td",{className:"py-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("consultation"===e.orderType?"bg-blue-600 text-white":"bg-green-600 text-white"),children:"consultation"===e.orderType?"Wycena":"Demo"})}),(0,s.jsx)("td",{className:"py-2",children:e.productId||"N/A"}),(0,s.jsx)("td",{className:"py-2",children:e.phone}),(0,s.jsx)("td",{className:"py-2",children:e.status}),(0,s.jsx)("td",{className:"py-2",children:new Date(e.createdAt).toLocaleString("pl-PL")}),(0,s.jsx)("td",{className:"py-2",children:e.termsAccepted?"✔️":"❌"}),(0,s.jsx)("td",{className:"py-2",children:e.marketingAccepted?"✔️":"❌"}),(0,s.jsx)("td",{className:"py-2",children:(0,s.jsx)("button",{className:"btn-secondary text-xs px-3 py-1",onClick:()=>E(A===e.id?null:e.id),children:A===e.id?"Ukryj":"Szczeg\xf3ły"})})]},e.id),A===e.id&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"bg-darkbg/80 p-4 border-t border-b border-primary-700 text-sm",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Dodatkowe informacje od zamawiającego:"}),(0,s.jsx)("br",{}),e.info?e.info:(0,s.jsx)("span",{className:"text-darksubtle",children:"Brak dodatkowych informacji"})]})})})]})})})]})]}),"components"===e&&(0,s.jsxs)(l.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-darktext",children:"Komponenty"}),(0,s.jsxs)("button",{className:"btn-primary flex items-center space-x-2",onClick:()=>J(!0),children:[(0,s.jsx)(x,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Dodaj komponent"})]})]}),_?(0,s.jsx)("div",{className:"text-center py-12 text-lg text-darksubtle",children:"Ładowanie danych..."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Nazwa"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Koszt od (PLN)"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Koszt do (PLN)"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Uwagi"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-darksubtle",children:"Akcje"})]})}),(0,s.jsx)("tbody",{children:M.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-900 hover:bg-darkbg/60",children:[(0,s.jsx)("td",{className:"py-4 px-4",children:e.name}),(0,s.jsx)("td",{className:"py-4 px-4",children:e.priceFrom.toLocaleString("pl-PL")}),(0,s.jsx)("td",{className:"py-4 px-4",children:e.priceTo.toLocaleString("pl-PL")}),(0,s.jsx)("td",{className:"py-4 px-4",children:e.notes}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{K(e),H(!0)},className:"text-primary-500 hover:text-primary-300 p-1",title:"Edytuj",children:(0,s.jsx)(m,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:async()=>{confirm("Czy na pewno chcesz usunąć ten komponent?")&&(await fetch("/api/admin/components?id=".concat(e.id),{method:"DELETE"}),er())},className:"text-red-400 hover:text-red-300 p-1",title:"Usuń",children:(0,s.jsx)(u,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]}),N&&R&&(0,s.jsx)(b,{isOpen:N,onClose:()=>{k(!1),W(null)},onAdded:es,softwareToEdit:R}),(0,s.jsx)(b,{isOpen:D,onClose:()=>U(!1),onAdded:es}),F&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-darkpanel rounded-lg p-6 w-full max-w-xl mx-4 border border-gray-800",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-darktext",children:"Dodaj komponent"}),(0,s.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();let t=e.target,a={name:t.name.value,priceFrom:Number(t.priceFrom.value),priceTo:Number(t.priceTo.value),notes:t.notes.value};await fetch("/api/admin/components",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),J(!1),er()},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Nazwa"}),(0,s.jsx)("input",{name:"name",required:!0,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Koszt od (PLN)"}),(0,s.jsx)("input",{name:"priceFrom",type:"number",required:!0,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Koszt do (PLN)"}),(0,s.jsx)("input",{name:"priceTo",type:"number",required:!0,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Uwagi"}),(0,s.jsx)("input",{name:"notes",className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>J(!1),className:"btn-secondary",children:"Anuluj"}),(0,s.jsx)("button",{type:"submit",className:"btn-primary",children:"Dodaj"})]})]})]})}),V&&I&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-darkpanel rounded-lg p-6 w-full max-w-xl mx-4 border border-gray-800",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-darktext",children:"Edytuj komponent"}),(0,s.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();let t=e.target;await fetch("/api/admin/components?id=".concat(I.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name.value,priceFrom:Number(t.priceFrom.value),priceTo:Number(t.priceTo.value),notes:t.notes.value})}),H(!1),K(null),er()},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Nazwa"}),(0,s.jsx)("input",{name:"name",defaultValue:I.name,required:!0,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Koszt od (PLN)"}),(0,s.jsx)("input",{name:"priceFrom",type:"number",defaultValue:I.priceFrom,required:!0,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Koszt do (PLN)"}),(0,s.jsx)("input",{name:"priceTo",type:"number",defaultValue:I.priceTo,required:!0,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-darksubtle mb-1",children:"Uwagi"}),(0,s.jsx)("input",{name:"notes",defaultValue:I.notes,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-darkbg text-darktext"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{H(!1),K(null)},className:"btn-secondary",children:"Anuluj"}),(0,s.jsx)("button",{type:"submit",className:"btn-primary",children:"Zapisz zmiany"})]})]})]})})]})}h.env.CLOUDINARY_CLOUD_NAME,h.env.CLOUDINARY_API_KEY,h.env.CLOUDINARY_API_SECRET},257:function(e,t,a){"use strict";var s,r;e.exports=(null==(s=a.g.process)?void 0:s.env)&&"object"==typeof(null==(r=a.g.process)?void 0:r.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,s,r=e.exports={};function l(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{a="function"==typeof clearTimeout?clearTimeout:n}catch(e){a=n}}();var d=[],c=!1,o=-1;function x(){c&&s&&(c=!1,s.length?d=s.concat(d):o=-1,d.length&&m())}function m(){if(!c){var e=i(x);c=!0;for(var t=d.length;t;){for(s=d,d=[];++o<t;)s&&s[o].run();o=-1,t=d.length}s=null,c=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===n||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];d.push(new u(e,t)),1!==d.length||c||i(m)},u.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var l=a[e]={exports:{}},n=!0;try{t[e](l,l.exports,s),n=!1}finally{n&&delete a[e]}return l.exports}s.ab="//";var r=s(229);e.exports=r}()}},function(e){e.O(0,[527,64,971,117,744],function(){return e(e.s=7862)}),_N_E=e.O()}]);